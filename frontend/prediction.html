<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>IVF Predictor – Random Forest</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Chart.js for probability bar chart -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- External CSS -->
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header>
    <h1>IVF Predictor – Random Forest (Local)</h1>
  </header>

  <main>
    <section>
      <label for="backendUrl">Backend URL</label>
      <input
        type="text"
        id="backendUrl"
        value="http://127.0.0.1:8000"
      />
      <div id="featureOrderBox"></div>

      <h2>Input features (normalized)</h2>
      <small>
        Class mapping: <b>0 = RIF</b>, <b>1 = RPL</b>, <b>2 = Both</b>.
      </small>

      <div class="grid">
        <div>
          <label for="f_adenomyosis">1. Adenomyosis (0 = N, 1 = Y)</label>
          <input id="f_adenomyosis" type="text" placeholder="e.g., 0 or 1" />
        </div>

        <div>
          <label for="f_endometriosis">2. Endometriosis (0 = N, 1 = Y)</label>
          <input id="f_endometriosis" type="text" placeholder="e.g., 0 or 1" />
        </div>

        <div>
          <label for="f_fibroids">3. Fibroids (0 = N, 1 = Y)</label>
          <input id="f_fibroids" type="text" placeholder="e.g., 0 or 1" />
        </div>

        <div>
          <label for="f_ga">4. GA (normalized)</label>
          <input id="f_ga" type="text" placeholder="e.g., -0.8" />
          <small>Use normalized GA (z-score) from your dataset.</small>
        </div>

        <div>
          <label for="f_pcos">5. PCOS (0 = N, 1 = Y)</label>
          <input id="f_pcos" type="text" placeholder="e.g., 0 or 1" />
        </div>

        <div>
          <label for="f_th17">6. Th17 (CD4+)</label>
          <input id="f_th17" type="text" placeholder="e.g., -0.4" />
        </div>

        <div>
          <label for="f_th17_ifn_pos">7. Th17 (CD4+); IL17+/IFN+</label>
          <input id="f_th17_ifn_pos" type="text" placeholder="e.g., -0.5" />
        </div>

        <div>
          <label for="f_th17_ifn_neg">8. Th17 (CD4+); IL17+/IFN-</label>
          <input id="f_th17_ifn_neg" type="text" placeholder="e.g., -0.6" />
        </div>

        <div>
          <label for="f_treg_ratio">9. Th17TregRatio</label>
          <input id="f_treg_ratio" type="text" placeholder="e.g., -0.7" />
        </div>
      </div>

      <div class="row">
        <div>
          <label>
            <input type="checkbox" id="returnProba" checked />
            return_proba
          </label>
        </div>
        <div>
          <button id="predictBtn">Predict</button>
        </div>
      </div>
    </section>

    <section id="summary" style="display:none;"></section>

    <section>
      <canvas id="probaChart"></canvas>
    </section>

    <section>
      <h3>Raw Response</h3>
      <pre id="responseJson">{}</pre>
    </section>
  </main>

  <!-- External JS -->
  <script src="script.js"></script>
</body>
</html>
